---
description: Global scope rules for this repo
alwaysApply: true
---

# Scope Rules

- Only analyze `adjust-module-biz`
- Only modify code inside `adjust-module-biz`
- Do not change other modules or shared frameworks unless explicitly asked
- Prefer MyBatis-Plus wrapper/code queries; only write SQL in XML mappers when necessary
- Do not run `mvn` (Maven) commands; the user will run and verify locally
- Before modifying code, first describe the exact file/field changes you will make and wait for user confirmation.
- When using `LambdaQueryWrapperX`, do NOT chain `.select(...)` and then `.eqIfPresent(...)` in one fluent chain; call `select(...)` on a separate line (or set up the wrapper first) to avoid the type degrading to MyBatis-Plus `LambdaQueryWrapper` and losing `eqIfPresent(...)`.
- For request parameters representing ID lists, prefer JSON arrays (e.g. `List<Long>` / `List<String>`) over comma-separated strings; if backward compatibility is needed, support both formats temporarily via custom deserialization.
- For cloud-storage-backed fields (avatar/logo/file/etc), persist **only object `path/key`** (never store presigned URLs). When returning data, generate an accessible URL in the **service layer** via `FileApi.presignGetUrl(pathOrUrl, expirationSeconds)` (e.g. `7 * 24 * 60 * 60`); controllers should not contain this URL-building logic.
