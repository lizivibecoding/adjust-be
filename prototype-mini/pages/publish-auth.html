<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>èº«ä»½è®¤è¯</title>
  <link rel="stylesheet" href="../assets/base.css" />
  <style>
    .info-tip { background: #eaf4ff; color: #4677b8; padding: 12px 14px; border-radius: 12px; font-size: 12px; margin-bottom: 12px; }
    .form-card { padding: 8px 16px; margin-bottom: 14px; }
    .form-item { padding: 14px 0; border-bottom: 1px solid #f0f3f8; }
    .form-item:last-child { border-bottom: none; }
    .form-label { font-size: 14px; font-weight: 600; display: block; margin-bottom: 8px; }
    .form-label .required { color: #f54949; }
    .form-input { width: 100%; background: #f4f6fb; border-radius: 12px; padding: 12px; font-size: 13px; color: #3a4352; border: none; outline: none; box-sizing: border-box; }
    .form-textarea { width: 100%; background: #f4f6fb; border-radius: 12px; padding: 12px; font-size: 13px; color: #3a4352; min-height: 120px; border: none; outline: none; resize: vertical; box-sizing: border-box; }
    .form-select { width: 100%; appearance: none; -webkit-appearance: none; -moz-appearance: none; background: #f4f6fb; border-radius: 12px; padding: 12px 36px 12px 12px; font-size: 13px; color: #3a4352; border: none; outline: none; box-sizing: border-box; position: relative; }
    .select-wrap { position: relative; }
    .select-wrap::after { content: ""; position: absolute; right: 12px; top: 50%; transform: translateY(-50%); width: 0; height: 0; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 6px solid #9aa3b2; pointer-events: none; }
    .upload-btn { width: 100%; padding: 40px 12px; background: #f4f6fb; border-radius: 12px; border: 2px dashed #c9d3e6; text-align: center; cursor: pointer; color: #6b7382; font-size: 13px; }
    .upload-btn:hover { background: #eaf1ff; border-color: var(--primary); color: var(--primary); }
    .upload-icon { font-size: 32px; margin-bottom: 8px; display: block; }
    .upload-text { display: block; }
    .upload-file { display: none; }
    .file-name { margin-top: 8px; color: var(--primary); font-size: 12px; }
    .form-helper { color: #9aa3b2; font-size: 12px; margin-top: 8px; display: block; }
  </style>
</head>
<body>
  <div class="toast"></div>
  <div class="page">
    <div class="container">
      <div class="info-tip">è¯·å®Œæˆèº«ä»½è®¤è¯åå‘å¸ƒè°ƒå‰‚ä¿¡æ¯</div>

      <div class="card form-card">
        <div class="form-item">
          <span class="form-label">å§“å <span class="required">*</span></span>
          <input type="text" class="form-input" id="nameInput" placeholder="è¯·è¾“å…¥çœŸå®å§“å" />
        </div>
        <div class="form-item">
          <span class="form-label">æ‰‹æœºå· <span class="required">*</span></span>
          <input type="tel" class="form-input" id="phoneInput" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" maxlength="11" />
        </div>
        <div class="form-item">
          <span class="form-label">è®¤è¯ç±»å‹ <span class="required">*</span></span>
          <div class="select-wrap">
            <select class="form-select" id="authTypeSelect">
              <option value="">è¯·é€‰æ‹©è®¤è¯ç±»å‹</option>
              <option value="mentor">å¯¼å¸ˆè®¤è¯</option>
              <option value="senior">å­¦é•¿è®¤è¯</option>
            </select>
          </div>
        </div>
        <div class="form-item">
          <span class="form-label">è¯æ˜ææ–™ <span class="required">*</span></span>
          <div class="upload-btn" onclick="document.getElementById('fileInput').click()">
            <span class="upload-icon">ğŸ“</span>
            <span class="upload-text">ç‚¹å‡»ä¸Šä¼ è¯æ˜ææ–™</span>
            <span class="upload-text" style="font-size: 11px; margin-top: 4px;">æ”¯æŒå›¾ç‰‡ã€PDFç­‰æ ¼å¼</span>
          </div>
          <input type="file" class="upload-file" id="fileInput" accept="image/*,.pdf" onchange="handleFileSelect(event)" />
          <div id="fileName" class="file-name" style="display: none;"></div>
          <span class="form-helper">è¯·ä¸Šä¼ èƒ½å¤Ÿè¯æ˜æ‚¨èº«ä»½çš„ææ–™ï¼Œå¦‚å·¥ä½œè¯ã€å­¦ç”Ÿè¯ç­‰</span>
        </div>
        <div class="form-item">
          <span class="form-label">è®¤è¯è¯´æ˜</span>
          <textarea class="form-textarea" id="descriptionInput" placeholder="å¯å¡«å†™è¡¥å……è¯´æ˜ä¿¡æ¯ï¼ˆé€‰å¡«ï¼‰"></textarea>
        </div>
      </div>

      <button class="btn-primary" style="width:100%;" onclick="submitAuth()">æäº¤è®¤è¯</button>
    </div>
  </div>
  <script src="../assets/app.js"></script>
  <script>
    function handleFileSelect(event) {
      var file = event.target.files[0];
      if (file) {
        var fileName = document.getElementById('fileName');
        fileName.textContent = 'å·²é€‰æ‹©ï¼š' + file.name;
        fileName.style.display = 'block';
      }
    }

    function submitAuth() {
      var name = document.getElementById('nameInput').value.trim();
      var phone = document.getElementById('phoneInput').value.trim();
      var authType = document.getElementById('authTypeSelect').value;
      var file = document.getElementById('fileInput').files[0];

      if (!name) {
        showToast('è¯·è¾“å…¥å§“å');
        return;
      }

      if (!phone) {
        showToast('è¯·è¾“å…¥æ‰‹æœºå·');
        return;
      }

      // ç®€å•çš„æ‰‹æœºå·æ ¼å¼éªŒè¯
      var phoneRegex = /^1[3-9]\d{9}$/;
      if (!phoneRegex.test(phone)) {
        showToast('è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·');
        return;
      }

      if (!authType) {
        showToast('è¯·é€‰æ‹©è®¤è¯ç±»å‹');
        return;
      }

      if (!file) {
        showToast('è¯·ä¸Šä¼ è¯æ˜ææ–™');
        return;
      }

      // æ¨¡æ‹Ÿæäº¤è®¤è¯ï¼ˆå®é™…åº”è¯¥å‘é€åˆ°æœåŠ¡å™¨ï¼‰
      showToast('è®¤è¯ä¿¡æ¯å·²æäº¤ï¼Œå®¡æ ¸ä¸­...');
      
      // æ ‡è®°ä¸ºå·²è®¤è¯ï¼ˆå®é™…åº”è¯¥ç­‰å¾…æœåŠ¡å™¨å®¡æ ¸é€šè¿‡ï¼‰
      localStorage.setItem('publish_authenticated', 'true');
      localStorage.setItem('publish_auth_name', name);
      localStorage.setItem('publish_auth_phone', phone);
      localStorage.setItem('publish_auth_type', authType);

      // å»¶è¿Ÿè·³è½¬ï¼Œè®©ç”¨æˆ·çœ‹åˆ°æç¤º
      setTimeout(function() {
        location.href = 'publish-form.html';
      }, 1500);
    }
  </script>
</body>
</html>
