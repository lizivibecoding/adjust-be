<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>é¦–æ¬¡ç™»å½•å¼•å¯¼</title>
  <link rel="stylesheet" href="../assets/base.css" />
  <style>
    .step-indicator { display: flex; justify-content: center; gap: 8px; margin-bottom: 24px; padding-top: 20px; }
    .step-dot { width: 8px; height: 8px; border-radius: 50%; background: #e0e4e9; transition: all 0.3s; }
    .step-dot.active { background: var(--primary); width: 24px; border-radius: 4px; }
    .step-content { background: var(--card); border-radius: 16px; padding: 32px 24px; margin-bottom: 20px; box-shadow: 0 8px 24px rgba(31, 42, 58, 0.06); min-height: 400px; display: flex; flex-direction: column; justify-content: center; }
    .step-icon { width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #3a73ff, #5b92ff); display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 36px; }
    .step-title { font-size: 22px; font-weight: 700; text-align: center; margin-bottom: 12px; color: var(--text); }
    .step-desc { font-size: 15px; color: var(--muted); text-align: center; margin-bottom: 32px; line-height: 1.6; }
    .step-features { background: #f4f6fb; border-radius: 12px; padding: 16px; margin-bottom: 24px; }
    .feature-item { display: flex; align-items: center; gap: 10px; padding: 8px 0; font-size: 14px; color: #3a4352; }
    .feature-item::before { content: "âœ“"; width: 20px; height: 20px; border-radius: 50%; background: var(--primary); color: #ffffff; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600; flex-shrink: 0; }
    .btn-group { display: flex; gap: 12px; margin-top: 20px; }
    .btn-prev { flex: 1; padding: 16px; border-radius: 999px; background: #f2f4f9; color: #6b7382; font-size: 16px; font-weight: 600; border: none; cursor: pointer; display: none; }
    .btn-prev.active { display: block; }
    .btn-next { flex: 1; padding: 16px; border-radius: 999px; background: linear-gradient(135deg, #2f6bff, #4d8dff); color: #ffffff; font-size: 16px; font-weight: 600; border: none; cursor: pointer; }
    .btn-skip { width: 100%; padding: 12px; border-radius: 999px; background: transparent; color: var(--muted); font-size: 14px; border: none; cursor: pointer; margin-top: 12px; }
    .nav-arrows { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
    .nav-arrow { width: 40px; height: 40px; border-radius: 50%; background: rgba(47, 107, 255, 0.1); border: none; display: flex; align-items: center; justify-content: center; cursor: pointer; color: var(--primary); font-size: 18px; transition: all 0.3s; }
    .nav-arrow:disabled { opacity: 0.3; cursor: not-allowed; }
    .nav-arrow:not(:disabled):active { background: rgba(47, 107, 255, 0.2); transform: scale(0.95); }
    .step-content-wrapper { position: relative; overflow: hidden; }
    .step-content { transition: transform 0.3s ease, opacity 0.3s ease; }
    .step-content.slide-left { transform: translateX(-100%); opacity: 0; }
    .step-content.slide-right { transform: translateX(100%); opacity: 0; }
  </style>
</head>
<body>
  <div class="page">
    <div class="container">
    <div class="step-indicator">
      <div class="step-dot active" data-step="1"></div>
      <div class="step-dot" data-step="2"></div>
      <div class="step-dot" data-step="3"></div>
      <div class="step-dot" data-step="4"></div>
      <div class="step-dot" data-step="5"></div>
      <div class="step-dot" data-step="6"></div>
      <div class="step-dot" data-step="7"></div>
    </div>

    <div class="step-content-wrapper">
      <!-- <div class="nav-arrows">
        <button class="nav-arrow" id="prevArrow" onclick="goToPrevStep()" disabled>â€¹</button>
        <button class="nav-arrow" id="nextArrow" onclick="goToNextStep()">â€º</button>
      </div> -->
      <div class="step-content" id="stepContent">
        <!-- å†…å®¹ç”±JavaScriptåŠ¨æ€åŠ è½½ -->
      </div>
    </div>

    <div class="btn-group">
      <button class="btn-prev" id="prevBtn" onclick="goToPrevStep()">ä¸Šä¸€æ­¥</button>
      <button class="btn-next" id="nextBtn" onclick="goToNextStep()">ä¸‹ä¸€æ­¥</button>
    </div>
    <button class="btn-skip" onclick="skipOnboarding()">è·³è¿‡å¼•å¯¼</button>
    </div>
  </div>

  <script src="../assets/app.js"></script>
  <script>
    const steps = [
      {
        icon: "ğŸ‘¤",
        title: "å¡«å†™åŸºæœ¬ä¿¡æ¯",
        desc: "è¯·å…ˆå®Œå–„æ‚¨çš„åŸºæœ¬ä¿¡æ¯å’Œåˆè¯•æˆç»©ï¼Œç³»ç»Ÿå°†ä¸ºæ‚¨æä¾›ä¸ªæ€§åŒ–çš„è°ƒå‰‚æœåŠ¡",
        features: [
          "å¡«å†™æœ¬ç§‘å­¦æ ¡ä¸ä¸“ä¸š",
          "å¡«å†™ä¸€å¿—æ„¿æŠ¥è€ƒä¿¡æ¯",
          "å¡«å†™åˆè¯•å„ç§‘æˆç»©"
        ],
        action: "å‰å¾€å¡«å†™",
        url: "custom-form.html?onboarding=1"
      },
      {
        icon: "ğŸ“Š",
        title: "æˆç»©è¯„ä¼°",
        desc: "æ ¹æ®æ‚¨çš„ä¸€å¿—æ„¿æŠ¥è€ƒé™¢æ ¡å’Œä¸“ä¸šï¼Œç»“åˆå†å¹´å½•å–åˆ†æ•°çº¿ï¼Œç³»ç»Ÿå·²ä¸ºæ‚¨åˆ†æå‡ºè°ƒå‰‚å»ºè®®",
        features: [
          "è‡ªåŠ¨åˆ†ææˆç»©ä¸å½•å–çº¿å·®è·",
          "æ™ºèƒ½åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒå‰‚",
          "æˆç»©ä¿¡æ¯å·²è‡ªåŠ¨å¸¦å…¥ç³»ç»Ÿ"
        ],
        action: "ç»§ç»­",
        url: "onboarding.html?step=3"
      },
      {
        icon: "âš™ï¸",
        title: "å¡«å†™è°ƒå‰‚åå¥½",
        desc: "è¯·å¡«å†™æ‚¨çš„è°ƒå‰‚åå¥½ï¼Œå¸®åŠ©æˆ‘ä»¬ä¸ºæ‚¨æ¨èæ›´åˆé€‚çš„é™¢æ ¡å’Œä¸“ä¸š",
        features: [
          "é€‰æ‹©æœŸæœ›åœ°åŒº",
          "é€‰æ‹©é™¢æ ¡å±‚æ¬¡",
          "é€‰æ‹©å­¦ä¹ æ–¹å¼"
        ],
        action: "å‰å¾€å¡«å†™",
        url: "custom-form.html?onboarding=1&tab=intent"
      },
      {
        icon: "ğŸ“±",
        title: "å…³æ³¨å…¬ä¼—å·",
        desc: "å…³æ³¨æˆ‘ä»¬çš„å…¬ä¼—å·ï¼Œè·å–æœ€æ–°çš„è°ƒå‰‚ä¿¡æ¯ã€æ”¿ç­–è§£è¯»å’Œæ‹©æ ¡æŒ‡å¯¼",
        features: [
          "æœ€æ–°è°ƒå‰‚ä¿¡æ¯æ¨é€",
          "æ”¿ç­–è§£è¯»ä¸æ‹©æ ¡ç­–ç•¥",
          "è°ƒå‰‚ç»éªŒåˆ†äº«",
          "ä¸€å¯¹ä¸€å’¨è¯¢æœåŠ¡"
        ],
        action: "æˆ‘çŸ¥é“äº†",
        url: "onboarding.html?step=5"
      },
      {
        icon: "ğŸ¯",
        title: "æ™ºèƒ½æ¨èç³»ç»Ÿ",
        desc: "ç³»ç»Ÿå°†æ ¹æ®æ‚¨çš„ä¸€çº§å­¦ç§‘ï¼Œç»“åˆæ‚¨çš„æˆç»©å’Œåå¥½ï¼Œä¸ºæ‚¨æ¨èæœ€åŒ¹é…çš„è°ƒå‰‚é™¢æ ¡",
        features: [
          "æŒ‰ä¸€çº§å­¦ç§‘æ™ºèƒ½åŒ¹é…",
          "ä¸“ä¸šåŒ¹é…åº¦åˆ†æ",
          "å†å¹´å½•å–åˆ†æ•°çº¿å¯¹æ¯”",
          "è°ƒå‰‚æˆåŠŸç‡è¯„ä¼°"
        ],
        action: "æŸ¥çœ‹æ¨è",
        url: "custom-report.html?onboarding=1"
      },
      {
        icon: "ğŸ“š",
        title: "æŸ¥çœ‹è°ƒå‰‚ä¿¡æ¯",
        desc: "ç°åœ¨æ‚¨å¯ä»¥æµè§ˆå¾€å¹´å’Œå½“å¹´çš„è°ƒå‰‚ä¿¡æ¯ï¼Œæ‰¾åˆ°æœ€é€‚åˆæ‚¨çš„è°ƒå‰‚æœºä¼š",
        features: [
          "æŸ¥çœ‹å†å¹´è°ƒå‰‚æ•°æ®",
          "æµè§ˆå½“å¹´æœ€æ–°è°ƒå‰‚ä¿¡æ¯",
          "ä½¿ç”¨ç­›é€‰åŠŸèƒ½ç²¾å‡†æŸ¥æ‰¾",
          "è®¢é˜…æ„Ÿå…´è¶£çš„è°ƒå‰‚ä¿¡æ¯"
        ],
        action: "å¼€å§‹æµè§ˆ",
        url: "home.html?onboarding=1"
      },
      {
        icon: "ğŸ‰",
        title: "å¼•å¯¼å®Œæˆ",
        desc: "æ­å–œæ‚¨å®Œæˆå¼•å¯¼ï¼ç°åœ¨å¯ä»¥å¼€å§‹ä½¿ç”¨ç³»ç»Ÿçš„å„é¡¹åŠŸèƒ½äº†",
        features: [
          "è°ƒå‰‚ä¿¡æ¯æµè§ˆ",
          "æ™ºèƒ½æ¨èåŒ¹é…",
          "å¿—æ„¿è¡¨ç®¡ç†",
          "è®¢é˜…æé†’åŠŸèƒ½"
        ],
        action: "å¼€å§‹ä½¿ç”¨",
        url: "home.html"
      }
    ];

    let currentStep = 1;

    // ä»URLå‚æ•°è·å–å½“å‰æ­¥éª¤
    const urlParams = new URLSearchParams(window.location.search);
    const stepParam = urlParams.get('step');
    if (stepParam) {
      currentStep = parseInt(stepParam);
    }

    function init() {
      updateStepIndicator();
      loadStepContent();
      updateNavigationButtons();
      initSwipe();
    }

    function updateStepIndicator() {
      document.querySelectorAll('.step-dot').forEach((dot, index) => {
        if (index + 1 <= currentStep) {
          dot.classList.add('active');
        } else {
          dot.classList.remove('active');
        }
      });
    }

    function updateNavigationButtons() {
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const prevArrow = document.getElementById('prevArrow');
      const nextArrow = document.getElementById('nextArrow');
      
      // ä¸Šä¸€æ­¥æŒ‰é’®
      if (currentStep > 1) {
        prevBtn.classList.add('active');
        prevArrow.disabled = false;
      } else {
        prevBtn.classList.remove('active');
        prevArrow.disabled = true;
      }
      
      // ä¸‹ä¸€æ­¥æŒ‰é’®
      const step = steps[currentStep - 1];
      nextBtn.textContent = step.action;
      
      // ç®­å¤´æŒ‰é’®
      if (currentStep >= steps.length) {
        nextArrow.disabled = true;
      } else {
        nextArrow.disabled = false;
      }
    }

    function loadStepContent(animate = false) {
      const step = steps[currentStep - 1];
      const content = document.getElementById('stepContent');
      
      if (animate) {
        content.classList.add('slide-left');
        setTimeout(() => {
          content.innerHTML = `
            <div class="step-icon">${step.icon}</div>
            <div class="step-title">${step.title}</div>
            <div class="step-desc">${step.desc}</div>
            <div class="step-features">
              ${step.features.map(feature => `<div class="feature-item">${feature}</div>`).join('')}
            </div>
          `;
          content.classList.remove('slide-left');
          content.classList.add('slide-right');
          setTimeout(() => {
            content.classList.remove('slide-right');
          }, 10);
        }, 150);
      } else {
        content.innerHTML = `
          <div class="step-icon">${step.icon}</div>
          <div class="step-title">${step.title}</div>
          <div class="step-desc">${step.desc}</div>
          <div class="step-features">
            ${step.features.map(feature => `<div class="feature-item">${feature}</div>`).join('')}
          </div>
        `;
      }
    }

    function goToNextStep() {
      const step = steps[currentStep - 1];
      
      if (currentStep < steps.length) {
        // è·³è½¬åˆ°ä¸‹ä¸€æ­¥çš„URL
        if (step.url && (step.url.startsWith('http') || step.url.includes('.html'))) {
          window.location.href = step.url;
        } else {
          currentStep++;
          updateStepIndicator();
          loadStepContent(true);
          updateNavigationButtons();
        }
      } else {
        // å®Œæˆå¼•å¯¼
        localStorage.setItem('onboarding_completed', 'true');
        window.location.href = 'home.html';
      }
    }

    function goToPrevStep() {
      if (currentStep > 1) {
        currentStep--;
        updateStepIndicator();
        loadStepContent(true);
        updateNavigationButtons();
      }
    }

    // è§¦æ‘¸æ»‘åŠ¨æ”¯æŒ
    let touchStartX = 0;
    let touchEndX = 0;

    function initSwipe() {
      const content = document.getElementById('stepContent');
      
      content.addEventListener('touchstart', function(e) {
        touchStartX = e.changedTouches[0].screenX;
      }, { passive: true });

      content.addEventListener('touchend', function(e) {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
      }, { passive: true });
    }

    function handleSwipe() {
      const swipeThreshold = 50;
      const diff = touchStartX - touchEndX;
      
      if (Math.abs(diff) > swipeThreshold) {
        if (diff > 0 && currentStep < steps.length) {
          // å‘å·¦æ»‘åŠ¨ï¼Œä¸‹ä¸€æ­¥
          goToNextStep();
        } else if (diff < 0 && currentStep > 1) {
          // å‘å³æ»‘åŠ¨ï¼Œä¸Šä¸€æ­¥
          goToPrevStep();
        }
      }
    }

    function skipOnboarding() {
      if (confirm('ç¡®å®šè¦è·³è¿‡å¼•å¯¼å—ï¼Ÿæ‚¨å¯ä»¥ç¨ååœ¨ä¸ªäººä¸­å¿ƒæŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ã€‚')) {
        localStorage.setItem('onboarding_completed', 'true');
        window.location.href = 'home.html';
      }
    }

    init();
  </script>
</body>
</html>
